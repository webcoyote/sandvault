#!/usr/bin/env bash
set -Eeuo pipefail

if [[ ! -x "$HOME/node_modules/bin/codex" ]]; then
    echo >&2 "Installing codex..."
    npm install --global --silent @openai/codex@latest
fi

echo "$USER: running codex --dangerously-bypass-approvals-and-sandbox"
exec "$HOME/node_modules/bin/codex" --dangerously-bypass-approvals-and-sandbox "$@"
